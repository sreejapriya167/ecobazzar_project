<div class="absolute inset-0 -z-10 pointer-events-none">

  <!-- Top Left Blob -->
  <div class="
    absolute top-10 -left-20 w-96 h-96 
    rounded-full blur-3xl animate-pulse

    bg-emerald-400/25 
    dark:bg-emerald-700/20
  "></div>

  <!-- Bottom Right Blob -->
  <div class="
    absolute bottom-0 right-0 w-80 h-80 
    rounded-full blur-3xl animate-pulse delay-1000

    bg-teal-500/20 
    dark:bg-teal-700/20
  "></div>

  <!-- Center Blob -->
  <div class="
    absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 
    w-72 h-72 rounded-full blur-3xl animate-pulse delay-500
    bg-lime-400/15 
    dark:bg-lime-600/15
  "></div>

</div>

  <div class="max-w-5xl mx-auto">
    <!-- Header -->
<div class="text-center mb-18">
  <h1 class="text-4xl md:text-5xl font-extrabold 
             bg-gradient-to-r from-emerald-600 to-teal-600 
             bg-clip-text text-transparent leading-tight">
    Your Conscious Cart
  </h1>

  <p class="mt-3 text-lg md:text-xl text-gray-600 font-light">
    Every item here is a step toward a greener planet
  </p>
</div>

<!-- Loading -->
<div *ngIf="loading" class="text-center py-28">
  <div class="inline-block animate-spin rounded-full h-16 w-16 
              border-4 border-emerald-500 border-t-transparent"></div>
  <p class="mt-6 text-xl text-gray-600">Loading your eco-conscious choices...</p>
</div>

<!-- Error -->
<div *ngIf="error" class="text-center py-28">
  <p class="text-2xl font-bold text-red-600 mb-4">{{ error }}</p>
  <button (click)="loadCart()" 
          class="px-8 py-3 bg-emerald-600 hover:bg-emerald-700 
                 text-white font-bold rounded-xl shadow-xl transition">
    Try Again
  </button>
</div>

<!-- Empty Cart -->
<div *ngIf="!loading && items.length === 0" class="text-center py-28">
  
  <!-- Blurry faded background Cart text -->
  <div class="text-8xl md:text-9xl mb-6 text-gray-400 opacity-10 blur-sm select-none">
    Cart
  </div>

  <p class="text-2xl md:text-3xl font-semibold text-gray-500 mb-4">
    Your cart is empty
  </p>

  <p class="text-lg text-gray-500 mb-8">
    But the planet is waiting for your conscious choices
  </p>

  <a routerLink="/products"
     class="inline-block px-10 py-5 bg-emerald-600 hover:bg-emerald-700 
            text-white text-lg font-bold rounded-2xl shadow-xl 
            hover:shadow-2xl transform hover:-translate-y-1 
            transition-all duration-300">
    Start Shopping Consciously
  </a>
</div>


    <div *ngIf="!loading && items.length > 0" class="grid lg:grid-cols-3 gap-10">
      <div class="lg:col-span-2 space-y-6">
        <div *ngFor="let item of items; trackBy: trackByItemId" class="group flex items-center gap-6 p-8 rounded-3xl card backdrop-blur-xl border border-emerald-100 shadow-xl hover:shadow-2xl transform hover:-translate-y-2 transition-all duration-500">
          <div class="relative">
            <img [src]="item.imageUrl || 'assets/placeholder.png'" [alt]="item.productName" class="w-32 h-32 object-cover rounded-2xl shadow-lg" />
            <div *ngIf="item.ecoCertified" class="absolute -top-3 -right-3 bg-emerald-600 text-white px-4 py-2 rounded-full text-xs font-bold shadow-lg animate-pulse">
              Certified
            </div>
          </div>

          <div class="flex-1">
            <h3 class="text-2xl font-extrabold text-gray-900 group-hover:text-emerald-600 transition-colors">
              {{ item.productName }}
            </h3>
            <div class="mt-4 flex items-center gap-8 text-lg">
              <p class="text-gray-600">Quantity: <strong class="text-emerald-600">{{ item.quantity }}</strong></p>
              <p class="text-gray-600">CO₂: <strong class="text-orange-600">{{ item.carbonImpact * item.quantity | number:'1.1-2' }} kg</strong></p>
            </div>
            <p class="mt-4 text-3xl font-bold text-emerald-600">₹{{ (item.price * item.quantity) | number:'1.0-0' }}</p>
          </div>

          <button (click)="remove(item.id)" class="text-red-600 hover:text-red-700 font-semibold text-lg transition">
            Remove
          </button>
        </div>
      </div>

     <div class="lg:col-span-1">
  <div class="sticky top-8 rounded-3xl shadow-2xl overflow-hidden border border-emerald-100 bg-white/90 backdrop-blur-xl">
    
    <div class="bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-6 px-8 text-center shadow-md">
      <h2 class="text-3xl font-bold tracking-tight">Order Summary</h2>
      <p class="text-emerald-100 text-sm mt-1">Review your eco-friendly purchase</p>
    </div>

    <div class="p-8 space-y-6">
      
      <div class="space-y-4">
        <div class="flex justify-between items-center text-lg text-gray-700">
          <span class="font-medium">Subtotal</span>
          <span class="font-bold text-gray-900">₹{{ totalPrice | number:'1.0-0' }}</span>
        </div>

        <div class="flex justify-between items-center text-lg text-emerald-800">
          <span class="font-medium flex items-center gap-2">
             CO₂ Impact
             <span class="text-xs bg-emerald-100 px-2 py-0.5 rounded-full">Low</span>
          </span>
          <span class="font-bold">{{ totalCarbon | number:'1.1-2' }} kg</span>
        </div>
      </div>

      <div class="h-px bg-gray-200"></div>

      <div *ngIf="totalCarbonSaved > 0" class="bg-emerald-50 rounded-xl p-4 border border-emerald-100 text-center">
        <p class="text-sm font-medium text-emerald-800 uppercase tracking-wide">Total Impact Saved</p>
        <p class="text-3xl font-extrabold text-emerald-600 mt-1">
          {{ totalCarbonSaved | number:'1.1-2' }} kg
        </p>
      </div>

      <div *ngIf="suggestedEcoProduct" class="relative group">
        <div class="absolute -inset-0.5 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-2xl opacity-30 blur group-hover:opacity-60 transition duration-500"></div>
        <div class="relative bg-white border border-emerald-100 p-5 rounded-2xl text-center">
            <p class="text-gray-600 text-sm mb-2">Switch to <span class="font-bold text-emerald-700">{{ suggestedEcoProduct.name }}</span> and save:</p>
            <p class="text-2xl font-black text-emerald-600 mb-3">{{ suggestedEcoProduct.carbonSavings | number:'1.1-2' }} kg CO₂</p>
            <button (click)="swapToEco()" class="w-full py-2 bg-emerald-100 hover:bg-emerald-200 text-emerald-800 font-bold rounded-lg transition-colors text-sm">
              Apply Eco Switch
            </button>
        </div>
      </div>

      <button (click)="checkout()" 
        class="w-full py-4 text-xl font-bold rounded-xl text-white shadow-lg shadow-emerald-600/30
               bg-gradient-to-r from-emerald-600 to-teal-600 
               hover:from-emerald-700 hover:to-teal-700 
               transform active:scale-95 transition-all duration-200">
        Proceed to Checkout
      </button>

      <div class="flex justify-center items-center gap-2 text-xs text-gray-400 font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
        </svg>
        Secure • Fast • Planet-Friendly
      </div>

    </div>
  </div>
</div>
    </div>
  </div>
